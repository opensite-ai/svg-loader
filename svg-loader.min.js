(()=>{"use strict";var t={55(t,e,r){function n(t){return new Promise((e,r)=>{t.oncomplete=t.onsuccess=()=>e(t.result),t.onabort=t.onerror=()=>r(t.error)})}function o(t,e){let r;return(o,a)=>(()=>{if(r)return r;const o=indexedDB.open(t);return o.onupgradeneeded=()=>o.result.createObjectStore(e),r=n(o),r.then(t=>{t.onclose=()=>r=void 0},()=>{}),r})().then(t=>a(t.transaction(e,o).objectStore(e)))}let a;function s(){return a||(a=o("keyval-store","keyval")),a}function i(t,e=s()){return e("readonly",e=>n(e.get(t)))}function c(t,e,r=s()){return r("readwrite",r=>(r.put(e,t),n(r.transaction)))}function u(t,e=s()){return e("readwrite",e=>(t.forEach(t=>e.put(t[1],t[0])),n(e.transaction)))}function l(t,e=s()){return e("readonly",e=>Promise.all(t.map(t=>n(e.get(t)))))}function d(t,e,r=s()){return r("readwrite",r=>new Promise((o,a)=>{r.get(t).onsuccess=function(){try{r.put(e(this.result),t),o(n(r.transaction))}catch(t){a(t)}}}))}function f(t,e=s()){return e("readwrite",e=>(e.delete(t),n(e.transaction)))}function h(t,e=s()){return e("readwrite",e=>(t.forEach(t=>e.delete(t)),n(e.transaction)))}function b(t=s()){return t("readwrite",t=>(t.clear(),n(t.transaction)))}function g(t,e){return t.openCursor().onsuccess=function(){this.result&&(e(this.result),this.result.continue())},n(t.transaction)}function p(t=s()){return t("readonly",t=>{if(t.getAllKeys)return n(t.getAllKeys());const e=[];return g(t,t=>e.push(t.key)).then(()=>e)})}function y(t=s()){return t("readonly",t=>{if(t.getAll)return n(t.getAll());const e=[];return g(t,t=>e.push(t.value)).then(()=>e)})}function m(t=s()){return t("readonly",e=>{if(e.getAll&&e.getAllKeys)return Promise.all([n(e.getAllKeys()),n(e.getAll())]).then(([t,e])=>t.map((t,r)=>[t,e[r]]));const r=[];return t("readonly",t=>g(t,t=>r.push([t.key,t.value])).then(()=>r))})}r.r(e),r.d(e,{clear:()=>b,createStore:()=>o,del:()=>f,delMany:()=>h,entries:()=>m,get:()=>i,getMany:()=>l,keys:()=>p,promisifyRequest:()=>n,set:()=>c,setMany:()=>u,update:()=>d,values:()=>y})},187(t){t.exports=(t,e,r="")=>{const n=/url\(['"]?#([\w:.-]+)['"]?\)/g,o=/#([\w:.-]+)/g;return e.match(n)&&(e=e.replace(n,function(e,r){return t[r]?`url(#${t[r]})`:e})),["href","xlink:href"].includes(r)&&e.match(o)&&(e=e.replace(o,function(e,r){return t[r]?`#${t[r]}`:e})),e}},383(t){t.exports=(t,e,r)=>{const n=new RegExp("([^\r\n,{}]+)(,(?=[^}]*{)|s*{)","g");return t.replace(n,function(t,n,o){if(n.match(/^\s*(@media|@.*keyframes|to|from|@font-face|1?[0-9]?[0-9])/))return n+o;const a=n.match(/#(\w+)/);return a&&r[a[1]]&&(n=n.replace(a[0],`#${r[a[1]]}`)),(n=n.replace(/^(\s*)/,"$1"+e+" "))+o})}},969(t){let e=0;t.exports={incr:()=>++e,decr:()=>--e,curr:()=>e}}},e={};function r(n){var o=e[n];if(void 0!==o)return o.exports;var a=e[n]={exports:{}};return t[n](a,a.exports,r),a.exports}r.d=(t,e)=>{for(var n in e)r.o(e,n)&&!r.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},r.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};const{get:n,set:o,del:a,entries:s}=r(55),i=r(383),c=r(187),u=r(969),l="loader_",d=2592e6,f="svg[data-src]:not([data-id])",h=new Map,b=new Map,g=new WeakMap,p=new WeakSet,y=new Set,m=t=>`${l}${t}`,v=async t=>{const e=m(t);let r;try{r=await n(e)}catch(t){}if(!r)try{r=localStorage.getItem(e)}catch(t){}if(!r)return null;const o=(t=>{if(!t)return null;if("object"==typeof t)return t;try{return JSON.parse(t)}catch(t){return null}})(r);return o&&"object"==typeof o&&Date.now()<o.expiry?o.data:(await(async t=>{try{await a(t)}catch(t){}try{localStorage.removeItem(t)}catch(t){}})(e),null)},w=(t,e)=>{console.error(e);const r=new CustomEvent("iconloaderror",{bubbles:!0,detail:e.toString()});t.dispatchEvent(r),t.getAttribute("oniconloaderror")&&Function("error",t.getAttribute("oniconloaderror"))(e)},A=async t=>{if(!t||!t.getAttribute)return;const e=t.getAttribute("data-src");if(!e)return;let r;try{r=new URL(e,globalThis.location)}catch(e){return void w(t,e)}const n=r.toString().replace(r.hash,""),a=r.hash?r.hash.replace("#",""):"",s=t.getAttribute("data-cache"),l="disabled"!==s,f=(t=>{if(!t||"disabled"===t)return d;const e=Number.parseInt(t,10);return!Number.isFinite(e)||e<=0?d:1e3*e})(s),p="enabled"===t.getAttribute("data-js"),A="disabled"===t.getAttribute("data-unique-ids"),S="disabled"===t.getAttribute("data-css-scoping"),E=e=>((t,e,r)=>{const{enableJs:n,disableUniqueIds:o,disableCssScoping:a,spriteIconId:s}=e,l=!!s,d=(new DOMParser).parseFromString(r,"text/html"),f=l?d.getElementById(s):d.querySelector("svg");if(!f)throw Error("Resource returned invalid SVG markup.");const h=(()=>{if(y.size)return y;if("undefined"!=typeof document&&document.body)for(const t in document.body)t.startsWith("on")&&y.add(t);return y.add("onbegin"),y.add("onend"),y.add("onrepeat"),y.add("onfocusin"),y.add("onfocusout"),y.add("onbounce"),y.add("onfinish"),y.add("onshow"),y})(),b=g.get(t)||new Set,p=t.getAttribute("data-id")||`svg-loader_${u.incr()}`,m={};if(!o){const t=f.querySelectorAll("[id]");for(const e of t){const t=e.getAttribute("id"),r=`${t}_${u.incr()}`;e.setAttribute("id",r),m[t]=r}}const v=e=>{const r=e.tagName?e.tagName.toLowerCase():"";if("script"===r){if(e.remove(),!n)return;const r=document.createElement("script");return e.childNodes[0]&&r.appendChild(e.childNodes[0]),void t.appendChild(r)}const o=[];for(let t=0;t<e.attributes.length;t++){const{name:r,value:a}=e.attributes[t],s=c(m,a,r);a!==s&&e.setAttribute(r,s);const i=r.toLowerCase();!h.has(i)||n?["href","xlink:href","values"].includes(i)&&a.startsWith("javascript")&&!n&&o.push(r):o.push(r)}for(const t of o)e.removeAttribute(t);if("style"===r&&!a&&e.innerHTML){let t=i(e.innerHTML,`[data-id="${p}"]`,m);t=c(m,t),t!==e.innerHTML&&(e.innerHTML=t)}};v(f);const w=f.querySelectorAll("*");for(const t of w)v(t);if(t.innerHTML=l?f.outerHTML:f.innerHTML,!l)for(let e=0;e<f.attributes.length;e++){const{name:r,value:n}=f.attributes[e];t.getAttribute(r)&&!b.has(r)||(b.add(r),t.setAttribute(r,n))}g.set(t,b),t.setAttribute("data-id",p);const A=new CustomEvent("iconload",{bubbles:!0});if(t.dispatchEvent(A),t.getAttribute("oniconload")){t.setAttribute("onauxclick",t.getAttribute("oniconload"));const e=new CustomEvent("auxclick",{bubbles:!1,view:window});t.dispatchEvent(e),t.removeAttribute("onauxclick")}})(t,{enableJs:p,disableUniqueIds:A,disableCssScoping:S,spriteIconId:a},e),x=h.get(n);if(x)return void E(x);if(l){const t=await v(n);if(t)return h.set(n,t),void E(t)}if(b.has(n)){try{const t=await b.get(n);t&&E(t)}catch(e){w(t,e)}return}const M=fetch(n).then(t=>{if(!t.ok)throw Error(`Request for '${n}' returned ${t.status} (${t.statusText})`);return t.text()}).then(t=>{const e=t.toLowerCase().trim();if(!(e.startsWith("<svg")||e.startsWith("<?xml")||e.startsWith("<!doctype")))throw Error(`Resource '${n}' returned an invalid SVG file`);return l&&(async(t,e,r)=>{const n=m(t),a=JSON.stringify({data:e,expiry:Date.now()+r});try{return void await o(n,a)}catch(t){}try{localStorage.setItem(n,a)}catch(t){console.warn("Failed to set cache: ",t)}})(n,t,f),h.set(n,t),t});b.set(n,M);try{E(await M)}catch(e){w(t,e)}finally{b.delete(n)}};let S;globalThis.IntersectionObserver&&(S=new IntersectionObserver(t=>{t.forEach(t=>{t.isIntersecting&&(A(t.target),S.unobserve(t.target))})},{rootMargin:"1200px"}));const E=t=>{t&&!t.getAttribute("data-id")&&("lazy"===t.getAttribute("data-loading")&&S?p.has(t)||(p.add(t),S.observe(t)):A(t))};let x=!1;if(globalThis.addEventListener&&"undefined"!=typeof document){const t=()=>{!function(t=document){t&&t.querySelectorAll&&t.querySelectorAll(f).forEach(E)}(),!x&&globalThis.MutationObserver&&(x=!0,new MutationObserver(t=>{t.forEach(t=>{if("childList"===t.type&&t.addedNodes.forEach(t=>{(t=>{const e=[];return t&&t.nodeType===Node.ELEMENT_NODE?(t.matches&&t.matches(f)&&e.push(t),t.querySelectorAll&&t.querySelectorAll(f).forEach(t=>e.push(t)),e):e})(t).forEach(E)}),"attributes"===t.type&&t.target){const e=t.target;e.matches&&e.matches("svg[data-src]")&&A(e)}})}).observe(document.documentElement,{attributeFilter:["data-src"],attributes:!0,childList:!0,subtree:!0}))};"loading"===document.readyState?globalThis.addEventListener("DOMContentLoaded",t,{once:!0}):t()}globalThis.SVGLoader=globalThis.SVGLoader||{},globalThis.SVGLoader.destroyCache=async()=>{try{const t=await s();for(const e of t)e[0].startsWith(l)&&await a(e[0])}catch(t){}try{Object.keys(localStorage).forEach(t=>{t.startsWith(l)&&localStorage.removeItem(t)})}catch(t){}}})();
//# sourceMappingURL=svg-loader.min.js.map